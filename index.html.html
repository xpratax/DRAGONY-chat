<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>H$KASS</title>
<style>
body { margin:0; font-family: monospace; background:#000; color:#0ff; text-align:center; }
h1 { font-size:48px; background: linear-gradient(90deg, cyan, magenta, pink, yellow); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
img.logo { max-width:150px; margin-bottom:20px; }
#chat-container { width:90%; max-width:800px; margin:auto; margin-top:20px; border:1px solid #0ff; height:400px; overflow-y:auto; padding:10px; background:#111; }
input, button { padding:5px; margin:5px; border:1px solid #0ff; background:#000; color:#0ff; }
button:hover { background:#0ff; color:#000; cursor:pointer; }
</style>
</head>
<body>

<h1>H$KASS</h1>
<img class="logo" src="https://i.postimg.cc/xkSmd25W/h.png" alt="Logo H$KASS"/>

<div>
    <button onclick="loginGoogle()">Login com Google</button>
</div>

<div id="chat-container"></div>
<input type="text" id="msgInput" placeholder="Digite sua mensagem" onkeydown="if(event.key==='Enter'){sendMessage();}">
<button onclick="sendMessage()">Enviar</button>

<script>
let user = null;
const chatContainer = document.getElementById('chat-container');

// Simula login Google
function loginGoogle(){
    const name = prompt("Digite seu nome (simulando login Google):");
    if(name){ user = name; alert(`Logado como ${user}`); }
}

// Simula envio de mensagens
function sendMessage(){
    const input = document.getElementById('msgInput');
    if(!user){ alert("FaÃ§a login primeiro"); return; }
    if(input.value.trim()==='') return;

    // envia para backend Vercel
    fetch('https://nodejs-serverless-function-express-rho-two-81.vercel.app/api/chat', {
        method:'POST',
        headers:{ 'Content-Type':'application/json' },
        body: JSON.stringify({ user, message: input.value })
    }).then(r=>r.json()).then(data=>{
        displayMessages(data.messages);
    }).catch(err=>console.error(err));

    input.value='';
}

// Exibe mensagens
function displayMessages(msgs){
    chatContainer.innerHTML = '';
    msgs.forEach(m=>{
        const div = document.createElement('div');
        div.innerHTML = `<strong>${m.user}:</strong> ${m.message}`;
        chatContainer.appendChild(div);
    });
    chatContainer.scrollTop = chatContainer.scrollHeight;
}

// Atualiza mensagens a cada 2s
setInterval(()=>{
    fetch('https://nodejs-serverless-function-express-rho-two-81.vercel.app/api/chat')
        .then(r=>r.json())
        .then(data=>displayMessages(data.messages))
        .catch(err=>console.error(err));
},2000);
</script>
</body>
</html>
